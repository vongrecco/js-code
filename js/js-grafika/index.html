<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- Theme CSS -->
    <link href="style.css" rel="stylesheet">

</head>
<body>
    <div class="container">

        <img src="./wietnam.jpg" class="img" alt="Kartofel w wietnamie" width="400" height="400">
        <script>
          let img = document.querySelector('img');
          // console.log(img);
          console.log("szerokość: " + img.width);
        </script>

        console.dir() pokazuje właściwości obiektu

        <hr>

        obiekty jak img czy window posiadają metodę load, która wskazuje czy dany element został załadowany

    <pre>
        img.addEventListener('load', function() {
            console.log('Dana grafika została załadowana');
        });
    </pre>

    <hr>
        <div id="progressCnt"></div>
    </div>
        <script type="text/javascript">
             function progressImg(){
                let imgNames = [
                    '7.jpg',
                    '8.jpg',
                    '9.jpg',
                    '10.jpg',
                    '11.jpg',
                    '12.jpg',
                    '13.jpg',
                    '14.jpg',
                    '15.jpg',
                    '16.jpg',
                    '17.jpg',
                    '18.jpg',
                    '19.jpg',
                    '20.jpg',
                    '21.jpg'
                ];

                let howLoaded = 0,
                    loadingStep =  (100/imgNames.length),
                    images = [],
                    loadingBarBg = null,
                    loadingBar = null,
                    comunnicat = "Załadowanie zdjęć zakończone";

                function setLoadingBar(){
                    howLoaded++;
                    loadingBar.style.width = howLoaded * loadingStep + "%";

                    // if(howLoaded >= imgNames.length){
                    //     console.log(comunnicat);
                    // }
                }

                function startToLoading(){
                    let div = document.querySelector('#progressCnt');
                    loadingBarBg = document.createElement('div');
                    loadingBarBg.className = "loading-bg";

                    loadingBar = document.createElement('div')
                    loadingBar.className = 'progress';

                    loadingBarBg.appendChild(loadingBar);
                    div.appendChild(loadingBarBg);

                    for( let i = 0; i < imgNames.length; i++){
                        images[i] = new Image();
                        images[i].addEventListener('load', setLoadingBar.bind(this)); 
                        images[i].src = imgNames[i];
                        console.log(imgNames[i]);
                    }
                }

                document.addEventListener("DOMContentLoaded", function(event){
                    startToLoading();
                    console.log('działa');
                });
            };

            progressImg();
        </script>


</body>
  
</html>